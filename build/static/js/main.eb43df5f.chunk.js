(this.webpackJsonpview=this.webpackJsonpview||[]).push([[0],{148:function(e,t,s){"use strict";s.r(t);var n=s(0),c=s.n(n),a=s(25),r=s.n(a),i=(s(89),s(90),s(47)),l=s.n(i),j=s(79),o=s(22),b=s(29),d=s(6),u=s(48),O=s.n(u),x=s(150),m=s(31),h=s(154),g=s(155),f=s(151),p=s(10),v=s(1);var k=function(){var e=Object(n.useContext)(T),t=(e.userAccessData,e.setUserAccessData,Object(p.b)()),s=t.user,c=t.isAuthenticated,a=Object(p.b)().logout;return Object(v.jsx)(v.Fragment,{children:c?Object(v.jsx)(h.a,{bg:"navbar-dark bg-success",expand:"lg",className:"navbar navbar-expand-lg navbar-dark bg-success",children:Object(v.jsxs)(x.a,{children:[Object(v.jsx)(m.LinkContainer,{to:"/",children:Object(v.jsx)(h.a.Brand,{style:{color:"grey"},children:"Live Messanger"})}),Object(v.jsx)(h.a.Toggle,{"aria-controls":"basic-navbar-nav"}),Object(v.jsxs)(h.a.Collapse,{id:"basic-navbar-nav",children:[Object(v.jsxs)(g.a,{className:"ml-auto",children:[Object(v.jsx)(m.LinkContainer,{to:"/message",children:Object(v.jsx)(g.a.Link,{children:"Send Message"})}),Object(v.jsx)(m.LinkContainer,{to:"/profile",children:Object(v.jsxs)(g.a.Link,{children:["Profile (",s.name,")"]})})]}),Object(v.jsx)(f.a,{className:"btn btn-danger",onClick:function(){return a()},children:"Log Out"})]})]})}):Object(v.jsx)(h.a,{bg:"navbar-dark bg-success",expand:"lg",className:"navbar navbar-expand-lg navbar-dark bg-success",children:Object(v.jsxs)(x.a,{children:[Object(v.jsx)(m.LinkContainer,{to:"/",children:Object(v.jsx)(h.a.Brand,{style:{color:"grey"},children:"Live Messanger"})}),Object(v.jsx)(h.a.Toggle,{"aria-controls":"basic-navbar-nav"}),Object(v.jsx)(h.a.Collapse,{id:"basic-navbar-nav",children:Object(v.jsx)(g.a,{className:"ml-auto"})})]})})})},y=function(){return Object(v.jsx)(v.Fragment,{children:Object(v.jsx)(x.a,{children:Object(v.jsx)("div",{className:"App",children:Object(v.jsx)("h3",{children:"Now you can chat with anyone...."})})})})},C=(s(63),function(){var e=Object(p.b)().loginWithRedirect,t=Object(p.b)(),s=(t.user,t.isAuthenticated);return Object(v.jsx)(v.Fragment,{children:s?Object(v.jsx)(y,{}):Object(v.jsx)(x.a,{children:Object(v.jsxs)("div",{className:"App",children:[Object(v.jsx)("h1",{children:"Hello Welcome To Our World"}),Object(v.jsx)("br",{}),Object(v.jsx)("h4",{children:"Just sign up and log in and you are good to go."}),Object(v.jsx)("br",{}),Object(v.jsx)(f.a,{className:"btn btn-success btn-large",onClick:function(){return e()},children:"Register or Login"})]})})})}),N=s(84),L=s(37),w=s(51),I=s(83),A=s.n(I),M=s(152),P=s(153),S=s(156),F=A()(),E=function(){var e=Object(p.b)(),t=e.user,s=e.isAuthenticated,c=Object(n.useState)([]),a=Object(o.a)(c,2),r=a[0],i=a[1],l=Object(n.useState)([]),j=Object(o.a)(l,2),b=j[0],d=j[1],u=Object(n.useState)(t.name),O=Object(o.a)(u,2),m=O[0],h=O[1],g=Object(n.useState)({name:"",message:"",room:"",isPrivate:!1}),f=Object(o.a)(g,2),k=f[0],y=f[1],C=function(e){var t=m,s=e.target.textContent;h(s),F.emit("roomEntered",{oldRoom:t,newRoom:s}),d([])},I=function(e,t){var s=!1;return t.forEach((function(t){t===e&&(s=!0)})),s};return F.on("userList",(function(e){i(e),y({name:t.name,message:k.message})})),Object(n.useEffect)((function(){F.emit("userJoin",t.name)}),[]),F.on("newMessage",(function(e){d([].concat(Object(N.a)(b),[{name:e.name,message:e.message,isPrivate:e.isPrivate}]))})),Object(v.jsx)(v.Fragment,{children:s&&Object(v.jsxs)(x.a,{className:"Messanger",children:[Object(v.jsxs)(M.a,{children:[Object(v.jsx)(P.a,{xs:5,children:Object(v.jsxs)(S.a,{className:"leftpane",children:[Object(v.jsx)("br",{}),Object(v.jsxs)("h6",{children:["Email : ",Object(v.jsx)("b",{children:t.email})]}),Object(v.jsx)("br",{}),Object(v.jsx)("h6",{children:"Users Online:"}),Object(v.jsx)("ul",{children:r.map((function(e){return Object(v.jsx)("li",{onClick:C,children:e},e)}))})]})}),"\xa0 \xa0",Object(v.jsxs)(P.a,{className:"mainpane",children:[Object(v.jsxs)("p",{children:["Messanger(",m,")"]}),Object(v.jsxs)("div",{id:"messangerMessages",children:["\xa0 \xa0 Messages:",Object(v.jsx)(S.a,{children:Object(v.jsx)("ul",{children:b.map((function(e,t){return Object(v.jsxs)("li",{children:[Object(v.jsxs)("i",{children:[e.name,": "]}),Object(v.jsx)("i",{children:Object(v.jsx)("span",{style:{color:"black"},children:Object(v.jsx)("b",{children:e.message})})})]},t)}))})})]})]})]}),Object(v.jsx)(P.a,{className:"bottompane",children:Object(v.jsxs)("form",{onSubmit:function(e){e.preventDefault();var s={name:k.name,message:k.message,room:m,isPrivate:I(m,r)};F.emit("newMessage",s),y({name:t.name,message:""})},children:[Object(v.jsx)("input",{type:"text",name:"message",class:"form-control",value:k.message,onChange:function(e){y(Object(w.a)(Object(w.a)({},k),{},Object(L.a)({},e.target.name,e.target.value)))},required:!0}),Object(v.jsx)("br",{}),Object(v.jsx)("input",{type:"submit",class:"btn btn-success btn-sm",value:"send"}),Object(v.jsx)("br",{}),Object(v.jsx)("br",{})]})})]})})},R=function(){var e=Object(p.b)(),t=e.user,s=e.logout;return e.isAuthenticated&&Object(v.jsx)(S.a,{children:Object(v.jsxs)("div",{class:"col-md-8",children:[Object(v.jsx)("h1",{children:"Profile Information"}),Object(v.jsxs)("div",{class:"d-flex justify-content-center",children:[Object(v.jsx)("div",{className:"col-md-2 mb-3",children:Object(v.jsx)("img",{src:t.picture,alt:"Profile",className:"rounded-circle img-fluid profile-picture mb-3 mb-md-0"})}),Object(v.jsx)("div",{class:"form-group",children:Object(v.jsx)("fieldset",{children:Object(v.jsx)(f.a,{className:"btn btn-dark",onClick:function(){return s()},children:"Logout"})})})]}),Object(v.jsx)("div",{class:"form-group",children:Object(v.jsxs)("fieldset",{disabled:"",children:[Object(v.jsx)("label",{class:"form-label",for:"disabledInput",children:"Name"}),Object(v.jsx)("input",{class:"form-control",id:"readOnlyInput",type:"text",placeholder:t.name,readonly:""})]})}),Object(v.jsx)("div",{class:"form-group",children:Object(v.jsxs)("fieldset",{children:[Object(v.jsx)("label",{class:"form-label mt-4",for:"readOnlyInput",children:"Email"}),Object(v.jsx)("input",{class:"form-control",id:"readOnlyInput",type:"text",placeholder:t.email,readonly:""})]})}),Object(v.jsx)("div",{class:"form-group",children:Object(v.jsxs)("fieldset",{children:[Object(v.jsx)("label",{class:"form-label mt-4",for:"readOnlyInput",children:"location"}),Object(v.jsx)("input",{class:"form-control",id:"readOnlyInput",type:"text",placeholder:t.locale,readonly:""})]})}),Object(v.jsx)("div",{class:"form-group",children:Object(v.jsxs)("fieldset",{children:[Object(v.jsx)("label",{class:"form-label mt-4",for:"readOnlyInput",children:"Last Profile Update"}),Object(v.jsx)("input",{class:"form-control",id:"readOnlyInput",type:"text",placeholder:t.updated_at,readonly:""})]})}),Object(v.jsx)("br",{})]})})},T=Object(n.createContext)(),B=function(){var e=c.a.useState({token:void 0,user:void 0}),t=Object(o.a)(e,2),s=t[0],n=t[1],a=function(){var e=Object(j.a)(l.a.mark((function e(){var t,s,c;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return null==(t=localStorage.getItem("auth-token"))&&(localStorage.setItem("auth-token",""),t=""),e.next=4,O.a.post("/users/isTokenValid",null,{headers:{"auth-token":t}});case 4:if(s=e.sent,console.log(s.data),!s.data){e.next=11;break}return e.next=9,O.a.get("/users/profile",{headers:{"auth-token":t}});case 9:c=e.sent,n({token:t,user:c.data});case 11:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return c.a.useEffect((function(){a()}),[]),Object(v.jsx)(v.Fragment,{children:Object(v.jsx)(T.Provider,{value:{userAccessData:s,setUserAccessData:n},children:Object(v.jsxs)(b.BrowserRouter,{children:[Object(v.jsx)(k,{}),Object(v.jsxs)(x.a,{children:[Object(v.jsx)(d.d,{path:"/",exact:!0,component:Object(d.o)(C)}),Object(v.jsx)(d.d,{path:"/message-board",component:Object(d.o)(y)}),Object(v.jsx)(d.d,{path:"/message",component:Object(d.o)(E)}),Object(v.jsx)(d.d,{path:"/profile",component:R})]})]})})})},D=function(e){e&&e instanceof Function&&s.e(3).then(s.bind(null,157)).then((function(t){var s=t.getCLS,n=t.getFID,c=t.getFCP,a=t.getLCP,r=t.getTTFB;s(e),n(e),c(e),a(e),r(e)}))};r.a.render(Object(v.jsx)(p.a,{domain:"dev-zk8avpa2.us.auth0.com",clientId:"kuTG1pdRo9fMMUY6CvgBfjAdRWQERgo2",redirectUri:window.location.origin,children:Object(v.jsx)(B,{})}),document.getElementById("root")),D()},63:function(e,t,s){},89:function(e,t,s){},90:function(e,t,s){}},[[148,1,2]]]);
//# sourceMappingURL=main.eb43df5f.chunk.js.map